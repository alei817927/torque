PBS是由NAS（National Academy of Sciences）开发的面向批作业调度以及系统资源管理的软件，是一个广泛应用的本地集群调度器之一，PBS提供对批处理作业和分布式计算节点\(Compute nodes\)的控制。

PBS包含`OpenPBS`，`PBS Pro`和`Torque`。

* `OpenPBS`是最早的PBS系统；目前没有太多后续开发；
* `PBS Pro`是个商业版本，价格昂贵，功能最为丰富；
* `Torque`是Clustering公司接过了`OpenPBS`，并给与后续支持的一个开源版本。

本章节主要帮助您开始使用Torque，包含三块：

1. 什么是资源管理器？
2. 什么是批处理作业系统？
3. 基本的作业流程。

## 什么是资源管理器？

Torque包含内置的调度器pbs\_sched，它通常仅作为资源管理器来处理调度程序发来的请求。资源管理器提供了开始`start`、保留`hold`、取消`cancel`和监视`monitor`作业的低级功能。如果没有这些功能，调度程序就无法控制作业。

## 什么是批处理作业系统？

虽然Torque足够灵活可以处理各种调度，但它主要用于处理批处理作业系统。批处理作业系统是由计算机和其他资源\(网络、存储系统、许可证服务器等\)组成的，它们操作概念是整体大于部分之和。有些批处理系统由少数机器组成，运行一些单处理器作业，由用户自己来管理就可以了。但是有些批处理系统由成千上万的机器同时执行用户的作业，同时要进行软件对硬件设备和存储系统的访问控制。

批处理系统中集中资源通常会减少资源的技术管理，同时向用户提供统一的视图。一旦配置适当，批处理系统将抽象作业执行和管理的细节，达到资源高利用率。例如，用户通常只需要指定作业的最小约束，无需知道每个机器的运行情况。使用这种统一的抽象视图，批处理系统可以同时执行成千上万个作业。

批处理系统由四部分组成：①主节点`Master Node` ②作业提交/交互节点`Submit/Interactive Nodes` ③计算节点`Compute Nodes` ④资源`Resources`

| 部件 | 描述 |
| :--- | :--- |
| 主节点 | 一个批处理系统必须有能够运行\`pbs\_server\`的主节点。根据系统情况，主节点可以只做这个任务，也可以适当做些其他任务。 |
| 作业提交/交互节点 | 提交/交互节点是用户管理工作的一个入口点，用户在这些节点上可以提交和跟踪作业状况。有些站点会保留一个或多个交互节点去测试和排除故障。这些节点都有客户端命令。（如：qsub, qhold等） |
| 计算节点 | 计算节点是系统的主要组成部件，它主要用来执行用户提交的作业。在每个计算节点上都有运行\`pbs\_mom\`，和主节点上的\`pbs\_server\`通信，它主要是用来执行、杀死、管理提交的作业。根据系统需要，一个计算节点至少是主节点的两倍。 |
| 资源 | 资源包括高速网络、存储系统、许可证管理器等。为了保证有限的资源被合理使用，需要要对其进行有效的管理。 |

基本的作业流程

作业的工作流程分为四个阶段：①创建`creation` ②提交`submission`③执行`execution`④终止`finalization`

| 阶段 | 描述 |
| :--- | :--- |
| 创建 | 一般来说，提交脚本主要包含了作业的相关参数，这些参数可以包括作业执行期望时间、所需资源、执行的内容。下面是个示例文件： |
| 提交 |  |
| 执行 |  |
| 终止 |  |





